{% extends 'admin-index.html' %}
{% block header %}
{% load static %}
<head>
	<style>
		.comment-text{
			width:350px;
			overflow: hidden;
		}
	</style>
</head>

<!-- main content -->
<main class="">
    <div class="container-fluid">
        <div class="row">
            <!-- main title -->
            <div class="col-12">
                <div class="main__title">
                    <h2>Comments</h2>

                    <span class="main__title-stat">{{ total_comment }} Total</span>

                    <div class="main__title-wrap">
                        <!-- filter sort -->

                        <!-- end filter sort -->

                        <!-- search -->
                        <form action="#" class="main__title-form">
                            <input type="text" placeholder="Key word..">
                            <button type="button">
                                <i class="icon fa fa-search"></i>
                            </button>
                        </form>
                        <!-- end search -->
                    </div>
                </div>
            </div>
            <!-- end main title -->

            <!-- comments -->
            <div class="col-12">
                <div class="main__table-wrap">
                    <table class="main__table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>ITEM</th>
                                <th>AUTHOR</th>
                                <th>TEXT</th>
                                <th>CREATED DATE</th>
                                <th>ACTIONS</th>
                            </tr>
                        </thead>

                        <tbody>
                            {% for data in comment %}
                            <tr>
                                <td>
                                    <div class="main__table-text">{{ data.id }}</div>
                                </td>
                                <td>
                                    <div class="main__table-text"><a href="#">{{ data.product_id.movie_title }}</a>
                                    </div>
                                </td>
                                
                                <td>
                                    <div class="main__table-text">{{ data.user_id.user_full_name }}</div>
                                </td>
                                <td style="width: 100px;">
                                    <div class="main__table-text comment-text">{{ data.comment }}</div>
                                </td>

                                <td>
                                    <div class="main__table-text">{{ data.cdate }}</div>
                                </td>
                                <td>
                                    <div class="main__table-btns">
                                        <a href="#modal-view{{ data.id }} " class="main__table-btn main__table-btn--view open-modal">
                                            <i class="icon fa fa-eye"></i>
                                        </a>
                                        <a href="#modal-delete{{ data.id }}" class="main__table-btn main__table-btn--delete open-modal">
                                            <i class="icon fa fa-trash"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>

                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- end comments -->

            <!-- Accessing comment IDs -->

        </div>
    </div>
</main>
<!-- end main content -->

<!-- modal view -->
{% for data in comment %}
<div id="modal-view{{data.id}}" class="zoom-anim-dialog mfp-hide modal modal--view">
    <div class="comments__autor">
        {% if data.img %}
        <img src="/static/media/{{data.img}}" alt="">
        {% else %}
        <img src="../static/assets/images/user.svg" alt="">
        {% endif %}
        <span class="comments__name">{{ data.user_id.user_full_name }}</span>
        <span class="comments__time">{{ data.cdate }}</span>
    </div>


    <p class="comments__text" style="word-break: break-all;">{{ data.comment }}</p>

    <div class="comments__actions">
    </div>
</div>
{% endfor %}
<!-- end modal view -->

<!-- modal delete -->
{% for data in comment %}
<div id="modal-delete{{data.id}}" class="zoom-anim-dialog mfp-hide modal">
    <h6 class="modal__title">Comment delete</h6>

    <p class="modal__text">Are you sure to permanently delete this comment?</p>

    <div class="modal__btns">
        <a href="{% url "admincomments_delete" data.id %}" class="modal__btn modal__btn--apply" type="button">Delete</a>
        <button class="modal__btn modal__btn--dismiss" type="button">Dismiss</button>
    </div>
</div>
{% endfor %}
<!-- end modal delete -->

{% endblock %}
